<ui:composition template="./WEB-INF/template.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:define name="contenido">
        <h2>Registro</h2>

        <h:form>
            <p:messages>
                <p:autoUpdate />
            </p:messages>

            <p:panelGrid columns="2">

                <p:outputLabel for="rol" value="¿Qué eres?" />
                <p:selectOneMenu id="rol" value="#{registroBean.rol}" required="true">
                    <f:selectItem itemLabel="Seleccione un rol" itemValue="" noSelectionOption="true"/>
                    <f:selectItem itemLabel="Cliente" itemValue="cliente" />
                    <f:selectItem itemLabel="Refugio" itemValue="refugio" />
                </p:selectOneMenu>

                <p:outputLabel for="nombre" value="Nombre:" />
                <p:inputText id="nombre" value="#{registroBean.nombre}" required="true" />

                <p:outputLabel for="email" value="Email:" />
                <p:inputText id="email" value="#{registroBean.email}" required="true" />

                <p:outputLabel for="password" value="Contraseña:" />
                <p:password id="password" value="#{registroBean.password}" required="true" />

                <p:outputLabel for="telefono" value="Teléfono:" />
                <p:inputText id="telefono" value="#{registroBean.telefono}" required="true" />

                <p:outputLabel for="domicilio" value="Domicilio:" />
                <p:inputText id="domicilio" value="#{registroBean.domicilio}" required="true" />

                <!-- Campos solo para cliente -->
                <p:outputLabel for="nif" value="NIF:" rendered="#{registroBean.rol eq 'cliente'}" />
                <p:inputText id="nif" value="#{registroBean.nif}" rendered="#{registroBean.rol eq 'cliente'}" />

                <p:outputLabel for="fecha" value="Fecha de nacimiento:" rendered="#{registroBean.rol eq 'cliente'}" />
                <p:calendar id="fecha" value="#{registroBean.fechaNacimiento}" pattern="yyyy-MM-dd"
                            rendered="#{registroBean.rol eq 'cliente'}" />

                <!-- Campos solo para refugio -->
                <p:outputLabel for="cif" value="CIF:" rendered="#{registroBean.rol eq 'refugio'}" />
                <p:inputText id="cif" value="#{registroBean.cif}" rendered="#{registroBean.rol eq 'refugio'}" />

            </p:panelGrid>

            <p:commandButton value="Registrarse" action="#{registroBean.registrar}" update="@form" />
        </h:form>
    </ui:define>
</ui:composition>
